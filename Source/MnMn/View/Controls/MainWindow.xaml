<Window
  x:Class="ContentTypeTextNet.MnMn.MnMn.View.Controls.MainWindow"
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"


  xmlns:app_view_converter="clr-namespace:ContentTypeTextNet.MnMn.MnMn.View.Converter"
  xmlns:app_view_controls="clr-namespace:ContentTypeTextNet.MnMn.MnMn.View.Controls"
  xmlns:app_view_controls_app="clr-namespace:ContentTypeTextNet.MnMn.MnMn.View.Controls.App"
  xmlns:app_view_controls_service_smile="clr-namespace:ContentTypeTextNet.MnMn.MnMn.View.Controls.Service.Smile"
  xmlns:app_view_controls_service_smile_video="clr-namespace:ContentTypeTextNet.MnMn.MnMn.View.Controls.Service.Smile.Video"

  Title="MnMn: メインウィンドウ"
  Icon="/Resources/MnMn.ico"
  Left="{Binding Left, Mode=TwoWay}"
  Top="{Binding Top, Mode=TwoWay}"
  Width="{Binding Width, Mode=TwoWay}"
  Height="{Binding Height, Mode=TwoWay}"
  WindowState="{Binding State, Mode=TwoWay}"

  FontWeight="Normal"
  ResizeMode="CanResizeWithGrip"

  xmlns:d="http://schemas.microsoft.com/expression/blend/2008"   xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
  mc:Ignorable="d"
>
  <Window.Resources>
    <ResourceDictionary>
      <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="/View/Resources/TabDictionary.xaml" />
        <ResourceDictionary Source="/View/Resources/ImageDictionary.xaml" />
      </ResourceDictionary.MergedDictionaries>
      <app_view_converter:EnumDisplayConverter x:Key="EnumDisplayConverter" />
    </ResourceDictionary>
  </Window.Resources>
  <DockPanel>
    <StatusBar DockPanel.Dock="Bottom">
      <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
        <Image Source="/Resources/Service/Smile/Smile.png" Style="{StaticResource SmallItemImage}" />
        <TextBlock Text="{Binding SmileSession.LoginState, Converter={StaticResource EnumDisplayConverter}, Mode=OneWay}" />
        <TextBlock Text="{Binding SmileSession.LastLoginTime, Mode=OneWay}" />
      </StackPanel>
    </StatusBar>

    <TabControl TabStripPlacement="Left" SelectedValuePath="DataContext" SelectedValue="{Binding SelectedManager}">
      <TabItem Header="2525 video" DataContext="{Binding SmileManager}">
        <app_view_controls_service_smile:SmileManager x:Name="smile" />
      </TabItem>
      <TabItem Header="SETTING" DataContext="{Binding AppSettingManager}">
        <app_view_controls_app:AppSettingManager VerticalAlignment="Stretch" HorizontalAlignment="Stretch" VerticalContentAlignment="Stretch" HorizontalContentAlignment="Stretch"  />
      </TabItem>
      <TabItem Header="ABOUT" DataContext="{Binding AppInformationManager}">
        <!--<app_view_controls_app:AppInformationManager x:Name="about" />-->
        <!--<StackPanel>
          <StackPanel.Resources>
            <Style TargetType="Button">
              <Setter Property="Margin" Value="5" />
            </Style>
          </StackPanel.Resources>
          <Button Command="{Binding HelpCommand}">help</Button>
          <Button Command="{Binding ExecuteCommand}" CommandParameter="http://content-type-text.net/">Webサイト</Button>
          <Button Command="{Binding ExecuteCommand}" CommandParameter="https://groups.google.com/d/forum/mnmn-forum">フォーラム</Button>
          <Button Command="{Binding ExecuteCommand}" CommandParameter="https://bitbucket.org/sk_0520/mnmn">リポジトリ</Button>
          <Button Command="{Binding ExecuteCommand}" CommandParameter="https://bitbucket.org/sk_0520/mnmn/downloads">最新版</Button>
          <Button Command="{Binding ExecuteCommand}" CommandParameter="content.type.text.net@gmail.com">メール</Button>
        </StackPanel>-->
      </TabItem>

      <TabItem Header="help" DataContext="{Binding AppInformationManager}">
        <WebBrowser x:Name="helpBrowser" />
      </TabItem>

      <TabItem Header="check" DataContext="{Binding AppInformationManager}">
        <Grid>
          <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
          </Grid.RowDefinitions>

          <StackPanel Grid.Row="0">
            <Button Command="{Binding UpdateCheckCommand}">check</Button>
          </StackPanel>

          <WebBrowser Grid.Row="1" x:Name="updateBrowser">
            <WebBrowser.Style>
              <Style TargetType="WebBrowser">
                <Style.Triggers>
                  <DataTrigger Binding="{Binding UpdateCheckState}" Value="CurrentIsOld">
                    <Setter Property="IsEnabled" Value="True" />
                  </DataTrigger>
                </Style.Triggers>
                <Setter Property="IsEnabled" Value="False" />
              </Style>
            </WebBrowser.Style>
          </WebBrowser>

          <StackPanel Grid.Row="2">
            <StackPanel.Style>
              <Style TargetType="StackPanel">
                <Style.Triggers>
                  <DataTrigger Binding="{Binding UpdateCheckState}" Value="CurrentIsOld">
                    <Setter Property="IsEnabled" Value="True" />
                  </DataTrigger>
                </Style.Triggers>
                <Setter Property="IsEnabled" Value="False" />
              </Style>
            </StackPanel.Style>

            <TextBlock Text="{Binding UpdateText}" />
            <Button>update</Button>
          </StackPanel>

        </Grid>
      </TabItem>

    </TabControl>
  </DockPanel>
</Window>
