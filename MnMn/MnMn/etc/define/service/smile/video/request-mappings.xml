<?xml version="1.0" encoding="utf-8" ?>
<mappings>
	<!-- コメント取得 -->
	<mapping key="video-msg" content-type="text/xml">
		<item key="thread-id" type="simple" value="${thread-id}"  />
		<item key="version"   type="simple" value="20090904"  />
		<item key="version-old"   type="simple" value="20061206"  />
		<item key="res_from"  type="force-pair" name="res_from" bond="=" value="${res_from}" fail="">
			<bracket target="value" open="&quot;" close="&quot;" />
		</item>
		<item key="user-id"   type="force-pair" name="user_id" bond="=" value="${user-id}" fail="">
			<bracket target="value" open="&quot;" close="&quot;" />
		</item>
		<item key="threadkey" type="force-pair" name="threadkey" bond="=" value="${threadkey}" fail="" >
			<bracket target="value" open="&quot;" close="&quot;" />
		</item>
		<item key="force_184" type="force-pair" name="force_184" bond="=" value="${force_184}" fail="">
			<bracket target="value" open="&quot;" close="&quot;" />
		</item>

		<item key="time-msg" type="force-pair" name="${time-size}" bond="," value="${all-size}" fail="" />

		<item key="with_global"  type="simple" value="1"  />
		<item key="language"  type="simple" value="0"  />
		<item key="nicoru"  type="simple" value="1"  />
		<item key="scores"  type="simple" value="1"  />
		<item key="click_revisio"  type="simple" value="-1"  />

		<content trim="content" oneline="true">
			<![CDATA[
				<packet>
					<thread        with_global="${with_global}"     language="${language}" nicoru="${nicoru}" scores="${scores}" thread="${thread-id}" version="${version}"     ${res_from} ${force_184} ${threadkey} />
					<thread_leaves                                  language="${language}" nicoru="${nicoru}" scores="${scores}" thread="${thread-id}"                                                 ${force_184} ${threadkey} >${time-msg}</thread_leaves>
					<thread        click_revisio="${click_revisio}"                                           scores="${scores}" thread="${thread-id}" version="${version-old}" ${res_from} ${force_184} ${threadkey} fork="1" />
				</packet>
			]]>
		</content>
	</mapping>

	<!-- コメント投稿 -->
	<mapping key="video-msg-post" content-type="text/xml">
		<item key="thread" type="simple" value="${thread-id}"  />
		<item key="vpos" type="simple" value="${vpos}"  />
		<item key="commands" type="simple" value="${commands}"  />
		<item key="ticket" type="simple" value="${ticket}"  />
		<item key="user_id" type="simple" value="${user_id}"  />
		<item key="postkey" type="simple" value="${postkey}"  />
		<item key="premium" type="simple" value="${premium}"  />
		<content trim="content" oneline="true">
			<![CDATA[
				<chat
					thread=\"${thread}\"
					vpos=\"${vpos}\"
					mail=\"${commands}\"
					ticket=\"${ticket}\"
					user_id=\"${user_id}\"
					postkey=\"${postkey}\"
					premium=\"${premium}\"
				>${content}</chat>
			]]>
		</content>
	</mapping>

	<!-- 検索API -->
	<mapping key="video-snapshot">
		<item key="query" type="simple" value="${query}">
			<bracket target="value" open="&quot;" close="&quot;" />
			<custom target="value" rep-from="&quot;" rep-to="\&quot;" />
		</item>
		<item key="search" type="simple" value="${search}" />
		<item key="from" type="simple" value="${from}" />
		<item key="size" type="simple" value="${size}" />
		<item key="sort_by" type="simple" value="${sort_by}">
			<bracket target="value" open="&quot;" close="&quot;" />
		</item>
		<item key="order" type="simple" value="${order}">
			<bracket target="value" open="&quot;" close="&quot;" />
		</item>
		<item key="issuer" type="simple" value="${issuer}">
			<bracket target="value" open="&quot;" close="&quot;" />
		</item>

		<content trim="none" oneline="false">
			<![CDATA[
				{
					"query": ${query},
					"service": [ "video" ],
					"search": [ ${search} ],
					"join": [
						"cmsid",
						"title",
						"description",
						"start_time",
						"thumbnail_url",
						"view_counter",
						"comment_counter",
						"mylist_counter",
						"length_seconds"
					],
					"from": ${from},
					"size": ${size},
					"sort_by": ${sort_by},
					"order": ${order},
					"issuer": ${issuer}
				}
			]]>
		</content>
	</mapping>

	<!-- 関連タグ -->
	<mapping key="video-tag-relation">
		<item key="query" type="simple" value="${query}">
			<bracket target="value" open="&quot;" close="&quot;" />
			<custom target="value" rep-from="&quot;" rep-to="\&quot;" />
		</item>
		<item key="from" type="simple" value="0" />
		<item key="size" type="simple" value="10" />
		<item key="issuer" type="simple" value="pc" />
		<item key="reason" type="simple" value="user" />

		<content trim="none" oneline="false">
			<![CDATA[
				{
					"query": ${query},
					"service": [ "tag_video" ],
					"from": ${from},
					"size": ${size},
					"issuer":"${issuer}",
					"reason":"${reason}"
				}
			]]>
		</content>
	</mapping>
</mappings>
